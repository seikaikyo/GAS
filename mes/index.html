<!DOCTYPE html>
<html>
<head>
  <base target="_top">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <?!= include('styles'); ?>
</head>
<body>
  <div id="app">

    <!-- Loading Overlay -->
    <div v-if="loading" class="loading-overlay">
      <span class="loading loading-spinner loading-lg text-primary"></span>
      <div style="font-weight: 600; color: #667eea;">載入中...</div>
    </div>

    <!-- Header -->
    <header class="header-card">
      <div>
        <h1>SMAI - MES 線外表單</h1>
        <p class="subtitle">
          緊急備援作業模式
          <span v-if="version" class="version-badge">v{{ version }}</span>
        </p>
      </div>
      <div style="display: flex; gap: 0.5rem;">
        <button class="btn btn-ghost" @click="openShareModal">
          <i data-lucide="share-2" class="w-4 h-4"></i>
          分享
        </button>
        <button class="btn btn-primary" @click="refreshData">
          <i data-lucide="refresh-cw" class="w-4 h-4"></i>
          重新整理
        </button>
      </div>
    </header>

    <!-- Main Content -->
    <div class="content-card">
      <!-- Tabs Navigation -->
      <div class="tabs-nav">
        <a href="#" :class="['nav-tab', currentTab === 'work-orders' ? 'active' : '']" @click.prevent="currentTab = 'work-orders'"><span>工單管理</span></a>
        <a href="#" :class="['nav-tab', currentTab === 'dispatches' ? 'active' : '']" @click.prevent="currentTab = 'dispatches'"><span>現場派工</span></a>
        <a href="#" :class="['nav-tab', currentTab === 'reports' ? 'active' : '']" @click.prevent="currentTab = 'reports'"><span>報工紀錄</span></a>
        <a href="#" :class="['nav-tab', currentTab === 'outgassing' ? 'active' : '']" @click.prevent="currentTab = 'outgassing'"><span>釋氣檢驗</span></a>
        <a href="#" :class="['nav-tab', currentTab === 'aoi' ? 'active' : '']" @click.prevent="currentTab = 'aoi'"><span>AOI 檢驗</span></a>
        <a href="#" :class="['nav-tab', currentTab === 'r0' ? 'active' : '']" @click.prevent="currentTab = 'r0'"><span>標籤管理</span></a>
        <a href="#" :class="['nav-tab', currentTab === 'label-editor' ? 'active' : '']" @click.prevent="currentTab = 'label-editor'"><span>樣式設計</span></a>
        <a href="#" :class="['nav-tab', currentTab === 'oven' ? 'active' : '']" @click.prevent="currentTab = 'oven'"><span>烘箱監控</span></a>
        <a href="#" :class="['nav-tab', currentTab === 'wms' ? 'active' : '']" @click.prevent="currentTab = 'wms'"><span>倉儲管理</span></a>
        <a href="#" :class="['nav-tab', currentTab === 'settings' ? 'active' : '']" @click.prevent="currentTab = 'settings'"><span>設定</span></a>
      </div>

      <!-- Tab Panels -->
      <div class="tab-content">
        <?!= include('tab-work-orders'); ?>
        <?!= include('tab-dispatches'); ?>
        <?!= include('tab-reports'); ?>
        <?!= include('tab-outgassing'); ?>
        <?!= include('tab-aoi'); ?>
        <?!= include('tab-r0'); ?>
        <?!= include('tab-label-editor'); ?>
        <?!= include('tab-oven'); ?>
        <?!= include('tab-wms'); ?>
        <?!= include('tab-settings'); ?>
      </div>
    </div>

    <!-- Modals -->
    <?!= include('modals'); ?>

  </div>

  <?!= include('app'); ?>
</body>
</html>
